<!--Contenedor principal para centrar -->
<div class="h-screen flex flex-col items-center justify-center bg-gray-50">

    <div class="w-full max-w-xl bg-white rounded-lg shadow-lg p-8">
        <h2 class="text-2xl font-bold mb-6 text-center text-gray-700">Agregar producto</h2>

        <form [formGroup]="productoForm" (ngSubmit)="onSubmit()" novalidate class="flex flex-col gap-4">
            <!-- Código de Barras-->
            <div class="form-group flex flex-col gap-1">
                <label for="codigoBarras" class="etiqueta">Código de Barras</label>
                <input type="text" id="codigoBarras" formControlName="codigoBarras" class="form-control input-datos" autocomplete="off">
                @if (productoForm.get('codigoBarras')?.invalid && productoForm.get('codigoBarras')?.touched) {
                <div class="text-red-500 text-sm mt-1">
                    @if (productoForm.get('codigoBarras')?.errors?.['required']) {
                    <div>El código de barras no puede estar vacío</div>
                    }
                    @if (productoForm.get('codigoBarras')?.errors?.['maxlength']) {
                    <div>El código de barras no puede exceder los 20 caracteres</div>
                    }
                </div>
                }
            </div>

            <!-- Categoría y Proveedor contenedor-->
            <div class="flex flex-row gap-4">
                <div class="form-group flex flex-col gap-1 w-1/2">
                    <label for="idCategoria" class="etiqueta">Categoría</label>
                    <select id="idCategoria" formControlName="idCategoria" class="form-control input-datos">
                        <option value="">Seleccione una categoría</option>
                        @for (categoria of categorias; track categoria.id) {
                        <option [value]="categoria.id">{{categoria.nombre}}</option>
                        }
                    </select>
                    @if (productoForm.get('idCategoria')?.invalid && productoForm.get('idCategoria')?.touched) {
                    <div class="text-red-500 text-sm mt-1">La categoría es obligatoria</div>
                    }
                </div>
            
                <!-- Proveedor -->
                <div class="form-group flex flex-col gap-1 w-1/2">
                    <label for="idProveedor" class="etiqueta">Proveedor</label>
                    <select id="idProveedor" formControlName="idProveedor" class="form-control input-datos">
                        <option value="">Seleccione un proveedor</option>
                        @for (proveedor of proveedores; track proveedor.id) {
                        <option [value]="proveedor.id">{{proveedor.nombre}}</option>
                        }
                    </select>
                    @if (productoForm.get('idProveedor')?.invalid && productoForm.get('idProveedor')?.touched) {
                    <div class="text-red-500 text-sm mt-1">El proveedor es obligatorio</div>
                    }
                </div>
            </div>

            <!-- Descripción -->
            <div class="form-group flex flex-col gap-1">
                <label for="descripcion" class="etiqueta">Descripción</label>
                <textarea id="descripcion" formControlName="descripcion" class="form-control input-datos resize-none" rows="3"></textarea>
                @if (productoForm.get('descripcion')?.invalid && productoForm.get('descripcion')?.touched) {
                <div class="text-red-500 text-sm mt-1">
                    @if (productoForm.get('descripcion')?.errors?.['required']) {
                    <div>La descripción no puede estar vacía</div>
                    }
                    @if (productoForm.get('descripcion')?.errors?.['maxlength']) {
                    <div>La descripción no puede exceder los 255 caracteres</div>
                    }
                </div>
                }
            </div>

            <!-- Precio de Venta Y compra contenedor -->
            <div class="flex flex-row gap-4">
                <div class="form-group flex flex-col gap-1 w-1/2">
                    <label for="precioVenta" class="etiqueta">Precio de Venta</label>
                    <input type="number" step="0.01" id="precioVenta" formControlName="precioVenta" class="form-control input-datos" min="0.01">
                    @if (productoForm.get('precioVenta')?.invalid && productoForm.get('precioVenta')?.touched) {
                    <div class="text-red-500 text-sm mt-1">
                        @if (productoForm.get('precioVenta')?.errors?.['required']) {
                        <div>El precio de venta es obligatorio</div>
                        }
                        @if (productoForm.get('precioVenta')?.errors?.['min']) {
                        <div>El precio de venta debe ser mayor que 0</div>
                        }
                    </div>
                    }
                </div>
            
                <!-- Precio de Compra -->
                <div class="form-group flex flex-col gap-1 w-1/2">
                    <label for="precioCompra" class="etiqueta">Precio de Compra</label>
                    <input type="number" step="0.01" id="precioCompra" formControlName="precioCompra" class="form-control input-datos" min="0.01">
                    @if (productoForm.get('precioCompra')?.invalid && productoForm.get('precioCompra')?.touched) {
                    <div class="text-red-500 text-sm mt-1">
                        @if (productoForm.get('precioCompra')?.errors?.['required']) {
                        <div>El precio de compra es obligatorio</div>
                        }
                        @if (productoForm.get('precioCompra')?.errors?.['min']) {
                        <div>El precio de compra debe ser mayor que 0</div>
                        }
                    </div>
                    }
                </div>
            </div>

            <!-- Stock Actual -->
            <div class="flex flex-row gap-4">
                <div class="form-group flex flex-col gap-1 w-1/2">
                    <label for="stockActual" class="etiqueta">Stock Actual</label>
                    <input type="number" id="stockActual" formControlName="stockActual" class="form-control input-datos" min="0">
                    @if (productoForm.get('stockActual')?.invalid && productoForm.get('stockActual')?.touched) {
                    <div class="text-red-500 text-sm mt-1">
                        @if (productoForm.get('stockActual')?.errors?.['required']) {
                        <div>El stock actual es obligatorio</div>
                        }
                        @if (productoForm.get('stockActual')?.errors?.['min']) {
                        <div>El stock actual no puede ser negativo</div>
                        }
                    </div>
                    }
                </div>
            
                <!-- Stock Mínimo -->
                <div class="form-group flex flex-col gap-1 w-1/2">
                    <label for="stockMinimo" class="etiqueta">Stock Mínimo</label>
                    <input type="number" id="stockMinimo" formControlName="stockMinimo" class="form-control input-datos" min="0">
                    @if (productoForm.get('stockMinimo')?.invalid && productoForm.get('stockMinimo')?.touched) {
                    <div class="text-red-500 text-sm mt-1">
                        @if (productoForm.get('stockMinimo')?.errors?.['required']) {
                        <div>El stock mínimo es obligatorio</div>
                        }
                        @if (productoForm.get('stockMinimo')?.errors?.['min']) {
                        <div>El stock mínimo no puede ser negativo</div>
                        }
                    </div>
                    }
                </div>
            </div>

            <button type="submit" class="mt-6 py-2 px-4 rounded bg-blue-600 text-white font-semibold hover:bg-blue-700 transition-colors disabled:opacity-50" [disabled]="productoForm.invalid">
                Guardar Producto
            </button>
        </form>
    </div>
    <style>
        .etiqueta{
            font-weight:bold;
            color: #111827;
        }

        .input-datos{            
            padding-left: 0.75rem;
            padding-right: 0.75rem;
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
            border-width: 1px;
            border-radius: 0.25rem;
            border-color: #E5E7EB;
            outline: none;
            transition: box-shadow 0.2s;
        }
        .input-datos:focus {
            box-shadow: 0 0 0 2px #60a5fa; /* Tailwind blue-400 */
            border-color: #60a5fa;
        }

    </style>
</div>